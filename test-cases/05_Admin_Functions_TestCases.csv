ID,Mô tả,Điều kiện,Dữ liệu đầu vào,Bước thực hiện,Kết quả mong đợi,Kết quả,Mức độ Ưu tiên
ADMIN-001,Truy cập Admin Dashboard - Token admin,User role = SystemAdmin,"Token: admin token","1. Login với admin account
2. Redirect tự động to /admin
3. Hoặc mở trực tiếp /admin","- useEffect check authorization
- getRoleFromToken() or getCurrentUser()
- Role check: admin/administrator/sysadmin
- authorized = true
- Render AdminPage
- Hiển thị AdminHeader với tabs",,High
ADMIN-002,Truy cập Admin - Không có token,Chưa login,"(no token)","1. Clear localStorage
2. Mở /admin","- getAuthToken() return null
- router.replace(""/login"")
- Redirect to login page
- Không render admin page",,High
ADMIN-003,Truy cập Admin - Token customer (không phải admin),User role = Customer,"Token: customer token","1. Login với customer
2. Cố mở /admin","- Check role from token
- Role = ""customer"" (không phải admin)
- authorized = false
- router.replace(""/login"")
- Redirect về login",,High
ADMIN-004,Loading state khi check authorization,Token checking,"(loading)","1. Mở /admin lần đầu
2. Backend đang check /me","- authorized = null (initial)
- Render loading spinner
- Text: ""Đang kiểm tra quyền truy cập...""
- Animation: animate-spin",,Medium
ADMIN-005,Admin Header - Tab navigation,Admin dashboard,"(tabs)","1. Đã login admin
2. Xem AdminHeader","- 5 tabs: Dashboard, Duyệt doanh nghiệp, Duyệt OCOP, Danh mục, Báo cáo
- Tab active: bg-indigo-600 text-white
- Tab inactive: text-gray-600 hover:bg-gray-100
- onClick: onTabChange(tabType)",,High
ADMIN-006,Tab Dashboard - Tổng quan,Tab = dashboard,"(stats)","1. Click tab ""Dashboard""
2. Hoặc mở /admin lần đầu","- activeTab = 'dashboard'
- Render DashboardTab component
- 4 stat cards: Tổng doanh nghiệp, Sản phẩm OCOP, Chờ duyệt, Danh mục
- Hiện tại: values = ""-"" (chưa fetch data)
- Gradient backgrounds: blue, green, yellow, purple",,Medium
ADMIN-007,Tab Duyệt doanh nghiệp - Pending applications,Tab = enterprise-approval; DB có pending applications,"(applications)","1. Click tab ""Duyệt doanh nghiệp""","- Render EnterpriseApprovalTab
- Gọi API: getEnterpriseApplications({ status: ""Pending"" })
- Hiển thị table/list applications
- Mỗi row: ID, Tên DN, Email, Ngày nộp, Status
- Actions: Approve button, Reject button",,High
ADMIN-008,Approve enterprise application,Pending application ID=1,"ApplicationID: 1","1. Ở tab Duyệt doanh nghiệp
2. Click ""Approve"" trên application ID 1","- Confirm dialog: ""Bạn có chắc muốn duyệt?""
- Call API: approveEnterpriseApplication(1)
- Response 200
- Application status: Pending → Approved
- Tạo Enterprise mới trong DB
- Refresh list
- Toast: ""Đã duyệt doanh nghiệp thành công""",,High
ADMIN-009,Reject enterprise application,Pending application ID=2,"ApplicationID: 2
Comment: Thiếu giấy tờ","1. Click ""Reject"" trên application
2. Nhập comment vào modal","- Modal mở: ""Nhập lý do từ chối""
- Input comment required
- Click ""Xác nhận""
- Call: rejectEnterpriseApplication(2, comment)
- Status: Pending → Rejected
- adminComment lưu trong DB
- Refresh list",,High
ADMIN-010,Tab Duyệt OCOP - Product approval,Tab = ocop-approval; Products pending,"(products)","1. Click tab ""Duyệt OCOP""","- Render OcopApprovalTab
- Gọi API: getProducts({ status: ""PendingApproval"" })
- Hiển thị grid/table products chờ duyệt
- Mỗi product: Ảnh, Tên, Enterprise, Price, Category
- Actions: Approve button với OCOP rating selector, Reject",,High
ADMIN-011,Approve product với OCOP rating,Product ID=20 pending,"ProductID: 20
OCOP rating: 4 sao","1. Ở tab Duyệt OCOP
2. Chọn OCOP rating từ dropdown (3-5 sao)
3. Click ""Approve""","- Modal: Select OCOP rating (3, 4, 5)
- Click Approve
- Call: updateProductStatus(20, { status: ""Approved"", ocopRating: 4 })
- Product status: PendingApproval → Approved
- ocopRating = 4
- approvedAt = now
- approvedByUserId = admin ID
- Product hiển thị trên trang chủ
- Refresh list",,High
ADMIN-012,Reject product,Product ID=21 pending,"ProductID: 21","1. Click ""Reject"" trên product","- Confirm dialog
- Call: updateProductStatus(21, { status: ""Rejected"" })
- Status: PendingApproval → Rejected
- Product không hiển thị trên trang chủ
- Enterprise admin nhận thông báo (nếu có)",,High
ADMIN-013,Tab Danh mục - Category management,Tab = categories,"(categories)","1. Click tab ""Danh mục""","- Render CategoryManagementTab
- Gọi API: getCategories()
- Hiển thị table categories: ID, Tên, Mô tả, Active, Actions
- Button ""+ Thêm danh mục mới""
- Actions: Edit, Delete, Toggle Active",,High
ADMIN-014,Tạo category mới,Category form,"Name: Đồ uống
Description: Các sản phẩm đồ uống
Active: true","1. Click ""Thêm danh mục mới""
2. Modal mở
3. Nhập tên, mô tả
4. Check Active
5. Click ""Tạo""","- Call: createCategory({ name, description, isActive: true })
- Response 201
- Category mới thêm vào DB
- Refresh list categories
- Toast: ""Đã tạo danh mục thành công""",,Medium
ADMIN-015,Update category,Category ID=5,"CategoryID: 5
New name: Thực phẩm chế biến","1. Click ""Edit"" trên category
2. Modal với data prefilled
3. Sửa tên
4. Click ""Cập nhật""","- Call: updateCategory(5, { name: ""Thực phẩm chế biến"" })
- Response 200
- Category name update trong DB
- Refresh list
- Toast: ""Đã cập nhật danh mục""",,Medium
ADMIN-016,Delete category,Category ID=6 không có products,"CategoryID: 6","1. Click ""Delete"" trên category
2. Confirm dialog","- Confirm: ""Xóa danh mục này?""
- Call: deleteCategory(6)
- Response 204
- Category bị xóa khỏi DB
- Refresh list
- Toast: ""Đã xóa danh mục""",,Medium
ADMIN-017,Delete category có products,Category có products đang dùng,"CategoryID: 3 (Nông sản)","1. Cố xóa category đang được dùng","- Backend check: products using categoryId=3
- Trả về lỗi 400: ""Cannot delete category in use""
- Frontend hiển thị error
- Toast: ""Không thể xóa danh mục đang có sản phẩm""",,Medium
ADMIN-018,Toggle category Active/Inactive,Category isActive=true,"CategoryID: 4","1. Click toggle switch Active/Inactive","- Call: updateCategory(4, { isActive: false })
- Category chuyển sang inactive
- Products thuộc category này không hiển thị filter (nếu filter by active categories)
- Toggle UI update",,Low
ADMIN-019,Tab Báo cáo - Province reports,Tab = reports,"(reports)","1. Click tab ""Báo cáo""","- Render ProvinceReportTab
- Gọi APIs:
  - getReportSummary()
  - getReportDistricts()
  - getReportRevenueByMonth()
- Hiển thị charts/tables:
  - Tổng quan: Total enterprises, products, applications, users, revenue
  - Báo cáo theo huyện: Table với district, enterprise count, OCOP count
  - Doanh thu theo tháng: Bar chart hoặc table",,Medium
ADMIN-020,Report Summary - Stats,Reports tab,"(stats)","1. Ở tab Báo cáo
2. Xem phần tổng quan","- Display cards:
  - Tổng doanh nghiệp: {totalEnterprises}
  - Tổng sản phẩm: {totalProducts}
  - Sản phẩm đã duyệt: {approvedProducts}
  - Chờ duyệt: {pendingProducts}
  - Tổng đơn hàng: {totalApplications}
  - Tổng doanh thu: {totalRevenue.toLocaleString()} ₫",,Medium
ADMIN-021,District Report - Table,Reports tab,"(district data)","1. Scroll xuống báo cáo theo huyện","- Table headers: Huyện, Số doanh nghiệp, Số sản phẩm OCOP
- Rows: data từ getReportDistricts()
- Example: Pleiku, 15, 42
- Sort by enterprise count hoặc district name",,Low
ADMIN-022,Revenue by Month - Chart,Reports tab,"(revenue data)","1. Xem phần doanh thu theo tháng","- Data: { month: ""2025-01"", revenue: 10000000 }
- Display: Bar chart hoặc line chart
- X-axis: Tháng
- Y-axis: Doanh thu (VNĐ)
- Format: toLocaleString",,Low
ADMIN-023,Admin logout,Logged in as admin,"(logout)","1. Ở Admin dashboard
2. Click nút Logout trên Header","- clearAuthToken()
- localStorage.removeItem('token')
- router.push(""/login"")
- Redirect về login page",,Medium
ADMIN-024,Pagination - Enterprise applications,>10 applications,"(pagination)","1. DB có >10 applications
2. Xem tab Duyệt doanh nghiệp","- Hiển thị 10 applications per page
- Pagination controls: Trước, 1 2 3..., Sau
- Click số trang: gọi API với page param
- URL update: ?page=2",,Low
ADMIN-025,Search/Filter applications,Applications list,"Search: ""cà phê""","1. Ở tab Duyệt doanh nghiệp
2. Nhập ""cà phê"" vào search box","- Filter frontend hoặc call API với search param
- Hiển thị applications có tên DN chứa ""cà phê""
- Clear search button",,Low

